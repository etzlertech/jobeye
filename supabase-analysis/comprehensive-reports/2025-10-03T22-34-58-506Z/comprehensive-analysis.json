{
  "metadata": {
    "analyzed_at": "2025-10-03T22:34:58.505Z",
    "database_url": "https://rtwigjwqufozqfwozpvo.supabase.co",
    "analyzer_version": "2.0",
    "has_introspection_functions": true
  },
  "summary": {
    "total_tables": 65,
    "total_rows": 10458,
    "total_columns": 851,
    "total_indexes": 240,
    "total_foreign_keys": 62,
    "total_policies": 93,
    "tables_with_data": 19,
    "tables_with_rls": 49,
    "tables_with_policies": 51
  },
  "tables": [
    {
      "name": "spatial_ref_sys",
      "schema": "public",
      "row_count": 8500,
      "table_size": "6896 kB",
      "indexes_size": "208 kB",
      "total_size": "7144 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "srid",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "auth_name",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 256,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "auth_srid",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "srtext",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 2048,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "proj4text",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 2048,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "srid"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "spatial_ref_sys_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "srid",
          "size": "208 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "gps_tracking_records",
      "schema": "public",
      "row_count": 1046,
      "table_size": "264 kB",
      "indexes_size": "192 kB",
      "total_size": "488 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "latitude",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "longitude",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "accuracy_meters",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "altitude_meters",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "speed_mps",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "heading_degrees",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "recorded_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "accuracy",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "altitude",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "speed",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "heading",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "gps_tracking_records_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "gps_tracking_records_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "gps_tracking_records_user_id_fkey",
          "column": "user_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "gps_tracking_records_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "80 kB"
        },
        {
          "name": "idx_gps_tracking_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_gps_tracking_recorded",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "recorded_at",
          "size": "48 kB"
        },
        {
          "name": "idx_gps_tracking_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "32 kB"
        },
        {
          "name": "idx_gps_tracking_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "gps_tracking_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "code_pattern_violations",
      "schema": "public",
      "row_count": 277,
      "table_size": "72 kB",
      "indexes_size": "64 kB",
      "total_size": "168 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "file_path",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 500,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "line_number",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "column_number",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "pattern_type",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "violation_text",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "suggested_fix",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_fixed",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "fixed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "code_pattern_violations_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_violation_file",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "file_path",
          "size": "16 kB"
        },
        {
          "name": "idx_violation_fixed",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "is_fixed",
          "size": "16 kB"
        },
        {
          "name": "idx_violation_type",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "pattern_type",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "notification_queue",
      "schema": "public",
      "row_count": 175,
      "table_size": "184 kB",
      "indexes_size": "48 kB",
      "total_size": "264 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "recipient_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "priority",
          "type": "text",
          "nullable": false,
          "default": "'medium'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "message",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "data",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "method",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "attempts",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_attempt_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "error",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "notification_queue_company_id_fkey",
          "column": "company_id",
          "references_table": "companies",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_notification_queue_pending",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status, created_at",
          "size": "16 kB"
        },
        {
          "name": "idx_notification_queue_recipient",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "recipient_id, created_at",
          "size": "16 kB"
        },
        {
          "name": "notification_queue_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "notification_queue_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.role() = 'service_role'::text)",
          "with_check": "(auth.role() = 'service_role'::text)"
        },
        {
          "name": "notification_queue_tenant_access",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "auth_audit_log",
      "schema": "public",
      "row_count": 138,
      "table_size": "40 kB",
      "indexes_size": "96 kB",
      "total_size": "176 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "event_type",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_email",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ip_address",
          "type": "inet",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_agent",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "device_type",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "location",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "success",
          "type": "boolean",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reason",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "error_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "risk_score",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "details",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_command",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_confidence",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 3,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "auth_audit_log_session_id_fkey",
          "column": "session_id",
          "references_table": "user_sessions",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        },
        {
          "constraint_name": "auth_audit_log_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        }
      ],
      "indexes": [
        {
          "name": "auth_audit_log_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_auth_audit_log_created_at",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "created_at",
          "size": "16 kB"
        },
        {
          "name": "idx_auth_audit_log_event_type",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "event_type",
          "size": "16 kB"
        },
        {
          "name": "idx_auth_audit_log_ip_address",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "ip_address",
          "size": "8192 bytes"
        },
        {
          "name": "idx_auth_audit_log_risk_score",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "risk_score",
          "size": "8192 bytes"
        },
        {
          "name": "idx_auth_audit_log_success",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "success",
          "size": "16 kB"
        },
        {
          "name": "idx_auth_audit_log_user_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can view tenant audit logs",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = 'admin'::user_role) AND ((ue.tenant_id = auth_audit_log.tenant_id) OR (auth_audit_log.tenant_id IS NULL)))))",
          "with_check": null
        }
      ]
    },
    {
      "name": "customers",
      "schema": "public",
      "row_count": 83,
      "table_size": "24 kB",
      "indexes_size": "64 kB",
      "total_size": "128 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "text",
          "nullable": false,
          "default": "(gen_random_uuid())::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_number",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "email",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "phone",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "mobile_phone",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "billing_address",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "service_address",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tags",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "version",
          "type": "integer",
          "nullable": true,
          "default": "1",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "intake_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "customers_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "customers_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "customers_tenant_id_customer_number_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, customer_number",
          "size": "16 kB"
        },
        {
          "name": "idx_customers_name",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "name",
          "size": "16 kB"
        },
        {
          "name": "idx_customers_tenant_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "customers_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        }
      ]
    },
    {
      "name": "tenants",
      "schema": "public",
      "row_count": 71,
      "table_size": "16 kB",
      "indexes_size": "32 kB",
      "total_size": "88 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "slug",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "CURRENT_TIMESTAMP",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "CURRENT_TIMESTAMP",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "tenants_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "tenants_slug_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "slug",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "invoices",
      "schema": "public",
      "row_count": 57,
      "table_size": "24 kB",
      "indexes_size": "112 kB",
      "total_size": "168 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "invoice_number",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "amount",
          "type": "numeric",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tax_amount",
          "type": "numeric",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "total_amount",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'draft'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "due_date",
          "type": "date",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "paid_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "payment_method",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "invoices_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        }
      ],
      "indexes": [
        {
          "name": "idx_invoices_customer",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "customer_id",
          "size": "16 kB"
        },
        {
          "name": "idx_invoices_due_date",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "due_date",
          "size": "16 kB"
        },
        {
          "name": "idx_invoices_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_invoices_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "16 kB"
        },
        {
          "name": "idx_invoices_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "invoices_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "invoices_unique_number",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, invoice_number",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Managers can create invoices",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))"
        },
        {
          "name": "Managers can update invoices",
          "command": "UPDATE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        },
        {
          "name": "Users can view their tenant's invoices",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        }
      ]
    },
    {
      "name": "jobs",
      "schema": "public",
      "row_count": 47,
      "table_size": "40 kB",
      "indexes_size": "120 kB",
      "total_size": "200 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_number",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "template_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "property_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "title",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'draft'::job_status",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "priority",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": "'normal'::job_priority",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "scheduled_start",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "scheduled_end",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_start",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_end",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_to",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_team",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "estimated_duration",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_duration",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_created",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "checklist_items",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "materials_used",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_used",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "photos_before",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "photos_after",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "signature_required",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "signature_data",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "billing_info",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_photo_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_confirmed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_quality_score",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "requires_supervisor_review",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_timestamp",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_gps_coords",
          "type": "point",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_method",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 20,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_confidence",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 20,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_timestamp",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_photo_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tool_reload_verified",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "offline_modified_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "offline_modified_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "special_instructions_audio",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "estimated_duration_minutes",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_duration_minutes",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_photo_urls",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "jobs_assigned_to_fkey",
          "column": "assigned_to",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "jobs_customer_id_fkey",
          "column": "customer_id",
          "references_table": "customers",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        },
        {
          "constraint_name": "jobs_property_id_fkey",
          "column": "property_id",
          "references_table": "properties",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "jobs_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_jobs_arrival",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "arrival_timestamp",
          "size": "8192 bytes"
        },
        {
          "name": "idx_jobs_assigned_to",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "assigned_to",
          "size": "16 kB"
        },
        {
          "name": "idx_jobs_completion",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "completion_timestamp",
          "size": "8192 bytes"
        },
        {
          "name": "idx_jobs_customer_property",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "customer_id, property_id",
          "size": "16 kB"
        },
        {
          "name": "idx_jobs_offline_modified",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "offline_modified_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_jobs_scheduled_start",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "scheduled_start",
          "size": "16 kB"
        },
        {
          "name": "idx_jobs_tenant_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, status",
          "size": "16 kB"
        },
        {
          "name": "jobs_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "jobs_tenant_id_job_number_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, job_number",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can manage their tenant's jobs",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT tenant_assignments.tenant_id\n   FROM tenant_assignments\n  WHERE ((tenant_assignments.user_id = auth.uid()) AND (tenant_assignments.is_active = true))))",
          "with_check": null
        },
        {
          "name": "Users can view their tenant's jobs",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT tenant_assignments.tenant_id\n   FROM tenant_assignments\n  WHERE ((tenant_assignments.user_id = auth.uid()) AND (tenant_assignments.is_active = true))))",
          "with_check": null
        }
      ]
    },
    {
      "name": "equipment_maintenance",
      "schema": "public",
      "row_count": 26,
      "table_size": "16 kB",
      "indexes_size": "32 kB",
      "total_size": "80 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "performed_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "maintenance_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "maintenance_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actions_performed",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "pre_maintenance_verification_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "post_maintenance_verification_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_date",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "equipment_maintenance_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_equipment_maintenance_equipment",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "equipment_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        }
      ]
    },
    {
      "name": "users_extended",
      "schema": "public",
      "row_count": 21,
      "table_size": "8192 bytes",
      "indexes_size": "96 kB",
      "total_size": "112 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "role",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": "'customer'::user_role",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "display_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "first_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "avatar_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "timezone",
          "type": "text",
          "nullable": true,
          "default": "'UTC'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "preferred_language",
          "type": "text",
          "nullable": true,
          "default": "'en-US'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "email_verified_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "phone_verified_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "password_changed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "terms_accepted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "privacy_policy_accepted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "marketing_consent",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "two_factor_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "failed_login_attempts",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "locked_until",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "users_extended_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "RESTRICT"
        }
      ],
      "indexes": [
        {
          "name": "idx_users_extended_active",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "is_active",
          "size": "16 kB"
        },
        {
          "name": "idx_users_extended_email_verified",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "email_verified_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_users_extended_last_login",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "last_login_at",
          "size": "16 kB"
        },
        {
          "name": "idx_users_extended_phone",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "phone",
          "size": "8192 bytes"
        },
        {
          "name": "idx_users_extended_role",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "role",
          "size": "16 kB"
        },
        {
          "name": "idx_users_extended_tenant_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "users_extended_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can view all users in tenant",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = 'admin'::user_role) AND (ue.tenant_id = users_extended.tenant_id))))",
          "with_check": null
        },
        {
          "name": "Users can update own profile",
          "command": "UPDATE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = id)",
          "with_check": null
        },
        {
          "name": "Users can view own profile",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = id)",
          "with_check": null
        }
      ]
    },
    {
      "name": "training_sessions",
      "schema": "public",
      "row_count": 20,
      "table_size": "8192 bytes",
      "indexes_size": "32 kB",
      "total_size": "48 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "trainer_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "training_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "session_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "demo_verification_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_demo_score",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 5,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_date",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_training_sessions_company",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "company_id",
          "size": "16 kB"
        },
        {
          "name": "training_sessions_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "kit_items",
      "schema": "public",
      "row_count": 13,
      "table_size": "8192 bytes",
      "indexes_size": "32 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "kit_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "item_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "quantity",
          "type": "numeric",
          "nullable": false,
          "default": "1",
          "max_length": null,
          "numeric_precision": 12,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "unit",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_required",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": false,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "kit_items_company_id_fkey",
          "column": "tenant_id",
          "references_table": "companies",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "kit_items_kit_id_fkey",
          "column": "kit_id",
          "references_table": "kits",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "kit_items_kit_idx",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "kit_id",
          "size": "16 kB"
        },
        {
          "name": "kit_items_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "kit_items_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.role() = 'service_role'::text)",
          "with_check": "(auth.role() = 'service_role'::text)"
        },
        {
          "name": "kit_items_tenant_access",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(tenant_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "properties",
      "schema": "public",
      "row_count": 11,
      "table_size": "16 kB",
      "indexes_size": "56 kB",
      "total_size": "104 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "property_number",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "address",
          "type": "jsonb",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "location",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "property_type",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 100,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "size_sqft",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "lot_size_acres",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "zones",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "access_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "gate_code",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "special_instructions",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_navigation_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "photos",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "intake_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reference_image_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "properties_customer_id_fkey",
          "column": "customer_id",
          "references_table": "customers",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        },
        {
          "constraint_name": "properties_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_properties_location",
          "type": "gist",
          "is_unique": false,
          "is_primary": false,
          "columns": "location",
          "size": "8192 bytes"
        },
        {
          "name": "idx_properties_tenant_customer",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, customer_id",
          "size": "16 kB"
        },
        {
          "name": "properties_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "properties_tenant_id_property_number_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, property_number",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can manage their tenant's properties",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT tenant_assignments.tenant_id\n   FROM tenant_assignments\n  WHERE ((tenant_assignments.user_id = auth.uid()) AND (tenant_assignments.is_active = true))))",
          "with_check": null
        },
        {
          "name": "Users can view their tenant's properties",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT tenant_assignments.tenant_id\n   FROM tenant_assignments\n  WHERE ((tenant_assignments.user_id = auth.uid()) AND (tenant_assignments.is_active = true))))",
          "with_check": null
        }
      ]
    },
    {
      "name": "kits",
      "schema": "public",
      "row_count": 6,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "112 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "kit_code",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "category",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 100,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": false,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "kits_company_id_fkey",
          "column": "tenant_id",
          "references_table": "companies",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "kits_company_id_kit_code_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, kit_code",
          "size": "16 kB"
        },
        {
          "name": "kits_company_name_idx",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, name",
          "size": "16 kB"
        },
        {
          "name": "kits_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "uniq_kits_company_code",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, kit_code",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "kits_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.role() = 'service_role'::text)",
          "with_check": "(auth.role() = 'service_role'::text)"
        },
        {
          "name": "kits_tenant_access",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(tenant_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "companies",
      "schema": "public",
      "row_count": 5,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "text",
          "nullable": false,
          "default": "(gen_random_uuid())::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "domain",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "companies_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "companies_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        },
        {
          "name": "companies_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "authenticated"
          ],
          "check_expression": "(id = COALESCE(((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text), (((current_setting('request.jwt.claims'::text, true))::json -> 'user_metadata'::text) ->> 'company_id'::text), (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text)))",
          "with_check": "(id = COALESCE(((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text), (((current_setting('request.jwt.claims'::text, true))::json -> 'user_metadata'::text) ->> 'company_id'::text), (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text)))"
        }
      ]
    },
    {
      "name": "kit_variants",
      "schema": "public",
      "row_count": 2,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "kit_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "variant_code",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_default",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": false,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "kit_variants_company_id_fkey",
          "column": "tenant_id",
          "references_table": "companies",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "kit_variants_kit_id_fkey",
          "column": "kit_id",
          "references_table": "kits",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "kit_variants_kit_id_variant_code_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "kit_id, variant_code",
          "size": "16 kB"
        },
        {
          "name": "kit_variants_kit_idx",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "kit_id",
          "size": "16 kB"
        },
        {
          "name": "kit_variants_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "kit_variants_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.role() = 'service_role'::text)",
          "with_check": "(auth.role() = 'service_role'::text)"
        },
        {
          "name": "kit_variants_tenant_access",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(tenant_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "day_plans",
      "schema": "public",
      "row_count": 2,
      "table_size": "8192 bytes",
      "indexes_size": "32 kB",
      "total_size": "64 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "plan_date",
          "type": "date",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'draft'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "route_data",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "total_distance_miles",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "estimated_duration_minutes",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_start_time",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_end_time",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "auto_schedule_breaks",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": false,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "day_plans_company_id_fkey",
          "column": "company_id",
          "references_table": "companies",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "day_plans_company_id_user_id_plan_date_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "company_id, user_id, plan_date",
          "size": "16 kB"
        },
        {
          "name": "day_plans_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "day_plans_tenant_access",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(company_id = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text))",
          "with_check": "(company_id = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "kit_assignments",
      "schema": "public",
      "row_count": 1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "kit_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "variant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "external_ref",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": false,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "kit_assignments_kit_id_fkey",
          "column": "kit_id",
          "references_table": "kits",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "kit_assignments_variant_id_fkey",
          "column": "variant_id",
          "references_table": "kit_variants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        }
      ],
      "indexes": [
        {
          "name": "kit_assignments_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "kit_assignments_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.role() = 'service_role'::text)",
          "with_check": "(auth.role() = 'service_role'::text)"
        },
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        }
      ]
    },
    {
      "name": "workflow_tasks",
      "schema": "public",
      "row_count": 0,
      "table_size": "0 bytes",
      "indexes_size": "64 kB",
      "total_size": "88 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "task_description",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "task_order",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completed_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "verification_photo_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ai_confidence",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "requires_supervisor_review",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "supervisor_approved",
          "type": "boolean",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "supervisor_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "verification_method",
          "type": "text",
          "nullable": true,
          "default": "'manual'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "verification_data",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "requires_supervisor_approval",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "task_type",
          "type": "text",
          "nullable": true,
          "default": "'verification'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "supervisor_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "workflow_tasks_completed_by_fkey",
          "column": "completed_by",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "workflow_tasks_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "workflow_tasks_supervisor_id_fkey",
          "column": "supervisor_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "workflow_tasks_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "workflow_tasks_user_id_fkey",
          "column": "user_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_workflow_tasks_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_workflow_tasks_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "16 kB"
        },
        {
          "name": "idx_workflow_tasks_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "workflow_tasks_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "workflow_tasks_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "geofences",
      "schema": "public",
      "row_count": 0,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "center_latitude",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "center_longitude",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "radius_meters",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "geofences_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "geofences_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "geofences_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_geofences_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_geofences_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "geofences_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "geofence_events",
      "schema": "public",
      "row_count": 0,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "geofence_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "event_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "latitude",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "longitude",
          "type": "double precision",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "geofence_events_geofence_id_fkey",
          "column": "geofence_id",
          "references_table": "geofences",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "geofence_events_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "geofence_events_user_id_fkey",
          "column": "user_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "geofence_events_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_geofence_events_geofence",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "geofence_id",
          "size": "16 kB"
        },
        {
          "name": "idx_geofence_events_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "geofence_events_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "inventory_images",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "media_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "file_path",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "mime_type",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "size_bytes",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "inventory_images_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "inventory_images_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        },
        {
          "name": "inventory_images_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "authenticated"
          ],
          "check_expression": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "ocr_jobs",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "vendor_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "ocr_jobs_vendor_id_fkey",
          "column": "vendor_id",
          "references_table": "vendors",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "ocr_jobs_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "ocr_jobs_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        },
        {
          "name": "ocr_jobs_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "authenticated"
          ],
          "check_expression": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "ocr_documents",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ocr_job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "file_path",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "page_count",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "ocr_documents_ocr_job_id_fkey",
          "column": "ocr_job_id",
          "references_table": "ocr_jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "ocr_documents_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "ocr_documents_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        },
        {
          "name": "ocr_documents_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "authenticated"
          ],
          "check_expression": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "ocr_line_items",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ocr_document_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "line_index",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "sku",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "qty",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 18,
          "numeric_scale": 6,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "unit_price",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 18,
          "numeric_scale": 6,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "total",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 18,
          "numeric_scale": 6,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "ocr_line_items_ocr_document_id_fkey",
          "column": "ocr_document_id",
          "references_table": "ocr_documents",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "ocr_line_items_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "ocr_line_items_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        },
        {
          "name": "ocr_line_items_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "authenticated"
          ],
          "check_expression": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))",
          "with_check": "(company_id = ((current_setting('request.jwt.claims'::text, true))::json ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "ocr_note_entities",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ocr_document_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "label",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "value",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "ocr_note_entities_ocr_document_id_fkey",
          "column": "ocr_document_id",
          "references_table": "ocr_documents",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "ocr_note_entities_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "ocr_note_entities_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        },
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        }
      ]
    },
    {
      "name": "vendor_locations",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "vendor_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "address",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "city",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "state",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "postal_code",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "country",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "vendor_locations_vendor_id_fkey",
          "column": "vendor_id",
          "references_table": "vendors",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "vendor_locations_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        },
        {
          "name": "vendor_locations_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        }
      ]
    },
    {
      "name": "item_transactions",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "40 kB",
      "total_size": "48 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "transaction_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "item_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "quantity",
          "type": "numeric",
          "nullable": false,
          "default": "1",
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "from_location_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "to_location_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "from_user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "to_user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "purchase_order_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "work_order_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "cost",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reason",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "detection_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "confidence_score",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 3,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "item_transactions_item_id_fkey",
          "column": "item_id",
          "references_table": "items",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_transactions_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_transactions_tenant_item",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, item_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_transactions_type_date",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "transaction_type, created_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_transactions_voice",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "voice_session_id",
          "size": "8192 bytes"
        },
        {
          "name": "item_transactions_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "transactions_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((auth.jwt() ->> 'role'::text) = 'service_role'::text)",
          "with_check": null
        },
        {
          "name": "transactions_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = ((((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "mfa_challenges",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "40 kB",
      "total_size": "48 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "challenge_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "method",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "challenge_data",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "(now() + '00:05:00'::interval)",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "attempts",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "max_attempts",
          "type": "integer",
          "nullable": true,
          "default": "3",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "success",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ip_address",
          "type": "inet",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_agent",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_mfa_challenges_challenge_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "challenge_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_mfa_challenges_expires_at",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "expires_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_mfa_challenges_user_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "mfa_challenges_challenge_id_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "challenge_id",
          "size": "8192 bytes"
        },
        {
          "name": "mfa_challenges_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "mfa_challenges_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can manage own MFA challenges",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = user_id)",
          "with_check": null
        }
      ]
    },
    {
      "name": "mfa_settings",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "32 kB",
      "total_size": "40 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "enabled",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "primary_method",
          "type": "USER-DEFINED",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "backup_methods",
          "type": "ARRAY",
          "nullable": true,
          "default": "'{}'::mfa_method[]",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "totp_secret",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "totp_backup_codes",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "sms_phone",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "email_verified",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_biometric_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_pattern_samples",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "recovery_codes_generated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_used_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "failed_attempts",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "locked_until",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "settings",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_mfa_settings_enabled",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "enabled",
          "size": "8192 bytes"
        },
        {
          "name": "idx_mfa_settings_user_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "mfa_settings_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "mfa_settings_user_id_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can manage own MFA settings",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = user_id)",
          "with_check": null
        }
      ]
    },
    {
      "name": "migration_tracking",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "32 kB",
      "total_size": "40 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "table_name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "has_company_id",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "has_tenant_id",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "row_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "migration_status",
          "type": "character varying",
          "nullable": false,
          "default": "'pending'::character varying",
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "migrated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_migration_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "migration_status",
          "size": "8192 bytes"
        },
        {
          "name": "idx_migration_table",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "table_name",
          "size": "8192 bytes"
        },
        {
          "name": "migration_tracking_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "migration_tracking_table_name_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "table_name",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "user_invitations",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "56 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "email",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "role",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": "'customer'::user_role",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "invitation_code",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "invited_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "invited_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "(now() + '7 days'::interval)",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "accepted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "accepted_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_used",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "welcome_message",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "permissions_preset",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_onboarding_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "user_invitations_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_user_invitations_code",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "invitation_code",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_invitations_email",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "email",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_invitations_expires_at",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "expires_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_invitations_tenant_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_invitations_used",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "is_used",
          "size": "8192 bytes"
        },
        {
          "name": "user_invitations_invitation_code_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "invitation_code",
          "size": "8192 bytes"
        },
        {
          "name": "user_invitations_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can manage invitations",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = ANY (ARRAY['admin'::user_role, 'manager'::user_role])))))",
          "with_check": null
        }
      ]
    },
    {
      "name": "table_inventory",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "32 kB",
      "total_size": "40 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "schema_name",
          "type": "character varying",
          "nullable": false,
          "default": "'public'::character varying",
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "table_name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "category",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "row_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "has_code_references",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "has_relationships",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_modified",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "decision",
          "type": "character varying",
          "nullable": false,
          "default": "'keep'::character varying",
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "decision_reason",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_table_category",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "category",
          "size": "8192 bytes"
        },
        {
          "name": "idx_table_decision",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "decision",
          "size": "8192 bytes"
        },
        {
          "name": "table_inventory_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "table_inventory_schema_name_table_name_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "schema_name, table_name",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "tenant_assignments",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "56 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "role",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_primary",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "access_level",
          "type": "integer",
          "nullable": true,
          "default": "1",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "permissions_override",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_accessed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "access_count",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "tenant_assignments_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_tenant_assignments_active",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "is_active",
          "size": "8192 bytes"
        },
        {
          "name": "idx_tenant_assignments_primary",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "is_primary",
          "size": "8192 bytes"
        },
        {
          "name": "idx_tenant_assignments_role",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "role",
          "size": "8192 bytes"
        },
        {
          "name": "idx_tenant_assignments_tenant_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_tenant_assignments_user_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "tenant_assignments_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "tenant_assignments_user_id_tenant_id_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "user_id, tenant_id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can manage tenant assignments",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = 'admin'::user_role))))",
          "with_check": null
        },
        {
          "name": "Users can view own tenant assignments",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = user_id)",
          "with_check": null
        }
      ]
    },
    {
      "name": "repository_inventory",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "domain",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "repository_name",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 255,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "file_path",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 500,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "pattern_type",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "target_pattern",
          "type": "character varying",
          "nullable": false,
          "default": "'class_based'::character varying",
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "migration_status",
          "type": "character varying",
          "nullable": false,
          "default": "'pending'::character varying",
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "dependencies_count",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "migrated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_repo_pattern",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "pattern_type",
          "size": "16 kB"
        },
        {
          "name": "idx_repo_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "migration_status",
          "size": "16 kB"
        },
        {
          "name": "repository_inventory_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "unique_file_path",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "file_path",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "equipment_incidents",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reported_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "incident_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_item",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "verification_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "severity",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "equipment_incidents_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_equipment_incidents_company",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "company_id",
          "size": "16 kB"
        },
        {
          "name": "idx_equipment_incidents_reported_by",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "reported_by",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "voice_profiles",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "56 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "wake_word",
          "type": "text",
          "nullable": true,
          "default": "'hey assistant'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "speech_rate",
          "type": "numeric",
          "nullable": true,
          "default": "1.0",
          "max_length": null,
          "numeric_precision": 3,
          "numeric_scale": 1,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_pitch",
          "type": "numeric",
          "nullable": true,
          "default": "1.0",
          "max_length": null,
          "numeric_precision": 3,
          "numeric_scale": 1,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "preferred_voice",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "language_code",
          "type": "text",
          "nullable": false,
          "default": "'en-US'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_feedback_enabled",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_feedback_level",
          "type": "text",
          "nullable": true,
          "default": "'standard'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "preferred_tts_provider",
          "type": "text",
          "nullable": true,
          "default": "'system'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_pattern_hash",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "confidence_threshold",
          "type": "numeric",
          "nullable": true,
          "default": "0.80",
          "max_length": null,
          "numeric_precision": 3,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_samples_collected",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_voice_training_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_recognition_provider",
          "type": "text",
          "nullable": true,
          "default": "'system'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "noise_cancellation_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_commands_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "accessibility_voice_navigation",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "onboarding_completed",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_analytics",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_voice_profiles_language",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "language_code",
          "size": "8192 bytes"
        },
        {
          "name": "idx_voice_profiles_onboarding",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "onboarding_completed",
          "size": "8192 bytes"
        },
        {
          "name": "idx_voice_profiles_pattern_hash",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "voice_pattern_hash",
          "size": "8192 bytes"
        },
        {
          "name": "idx_voice_profiles_provider",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "preferred_tts_provider",
          "size": "8192 bytes"
        },
        {
          "name": "idx_voice_profiles_user_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "voice_profiles_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "voice_profiles_user_id_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can manage own voice profile",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = user_id)",
          "with_check": null
        }
      ]
    },
    {
      "name": "notifications",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "32 kB",
      "total_size": "48 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notification_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "title",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "message",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "priority",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "related_entity_type",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "related_entity_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "read_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_notifications_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id, read_at",
          "size": "16 kB"
        },
        {
          "name": "notifications_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        }
      ]
    },
    {
      "name": "quality_audits",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "32 kB",
      "total_size": "48 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "auditor_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "audit_date",
          "type": "date",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "jobs_audited",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "site_inspection_verification_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "quality_score",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 5,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "issues_found",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_quality_audits_company_date",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "company_id, audit_date",
          "size": "16 kB"
        },
        {
          "name": "quality_audits_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "role_permissions",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "72 kB",
      "total_size": "88 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "role",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "permission_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "granted_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": false,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "conditions",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "role_permissions_permission_id_fkey",
          "column": "permission_id",
          "references_table": "permissions",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "role_permissions_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_role_permissions_active",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "is_active",
          "size": "16 kB"
        },
        {
          "name": "idx_role_permissions_role",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "role",
          "size": "16 kB"
        },
        {
          "name": "idx_role_permissions_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "8192 bytes"
        },
        {
          "name": "role_permissions_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "role_permissions_role_permission_id_tenant_id_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "role, permission_id, tenant_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can manage role permissions",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = 'admin'::user_role))))",
          "with_check": null
        },
        {
          "name": "Users can view role permissions",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "true",
          "with_check": null
        }
      ]
    },
    {
      "name": "training_certificates",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "32 kB",
      "total_size": "48 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "training_session_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "trainee_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "certificate_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "issued_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "score",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 5,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_training_certificates_trainee",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "trainee_id",
          "size": "16 kB"
        },
        {
          "name": "training_certificates_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "maintenance_schedule",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "scheduled_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "maintenance_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_to",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_maintenance_schedule_company",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "company_id",
          "size": "16 kB"
        },
        {
          "name": "idx_maintenance_schedule_date",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "scheduled_date",
          "size": "16 kB"
        },
        {
          "name": "maintenance_schedule_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "user_activity_logs",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "activity_date",
          "type": "date",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "jobs_completed",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_return_verification_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "summary",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_user_activity_logs_company",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "company_id",
          "size": "16 kB"
        },
        {
          "name": "idx_user_activity_logs_user_date",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id, activity_date",
          "size": "16 kB"
        },
        {
          "name": "user_activity_logs_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "permissions",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resource",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "action",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_commands",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "requires_confirmation",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "risk_level",
          "type": "integer",
          "nullable": true,
          "default": "1",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_permissions_resource_action",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "resource, action",
          "size": "16 kB"
        },
        {
          "name": "idx_permissions_risk_level",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "risk_level",
          "size": "16 kB"
        },
        {
          "name": "permissions_name_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "name",
          "size": "16 kB"
        },
        {
          "name": "permissions_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can manage permissions",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = 'admin'::user_role))))",
          "with_check": null
        },
        {
          "name": "Users can view permissions",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "true",
          "with_check": null
        }
      ]
    },
    {
      "name": "user_assignments",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "32 kB",
      "total_size": "40 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "role",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_user_assignments_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_assignments_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "user_assignments_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "user_assignments_user_id_tenant_id_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "user_id, tenant_id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "daily_reports",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": false,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "report_date",
          "type": "date",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "technician_count",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "jobs_assigned",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_audit_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "summary_text",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "daily_reports_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        }
      ]
    },
    {
      "name": "material_requests",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "requested_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "priority",
          "type": "text",
          "nullable": false,
          "default": "'normal'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "items_needed",
          "type": "jsonb",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reason",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "fulfilled_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "fulfilled_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "material_requests_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_material_requests_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_material_requests_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "16 kB"
        },
        {
          "name": "idx_material_requests_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "material_requests_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can create material requests",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))"
        },
        {
          "name": "Users can view their tenant's material requests",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        }
      ]
    },
    {
      "name": "customer_feedback",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "80 kB",
      "total_size": "96 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "feedback_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "severity",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reported_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'open'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "escalated_to",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "escalation_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resolution_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "customer_feedback_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        }
      ],
      "indexes": [
        {
          "name": "customer_feedback_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_customer_feedback_customer",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "customer_id",
          "size": "16 kB"
        },
        {
          "name": "idx_customer_feedback_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_customer_feedback_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "16 kB"
        },
        {
          "name": "idx_customer_feedback_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Managers can create feedback",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))"
        },
        {
          "name": "Users can view their tenant's feedback",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        }
      ]
    },
    {
      "name": "maintenance_tickets",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "32 kB",
      "total_size": "40 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reported_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "issue_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "severity",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'open'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_to",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resolution_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "estimated_cost",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "actual_cost",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_maintenance_tickets_equipment",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "equipment_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_maintenance_tickets_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "8192 bytes"
        },
        {
          "name": "idx_maintenance_tickets_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "8192 bytes"
        },
        {
          "name": "maintenance_tickets_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can create tickets",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))"
        },
        {
          "name": "Users can view their tenant's tickets",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        }
      ]
    },
    {
      "name": "user_sessions",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "80 kB",
      "total_size": "88 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "uuid_generate_v4()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "session_token",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "refresh_token_hash",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "device_id",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "device_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "device_type",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": "'desktop'::device_type",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "device_fingerprint",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ip_address",
          "type": "inet",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_agent",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "location",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_id",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_active",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_expires_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "wake_word_active",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "conversation_context",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "USER-DEFINED",
          "nullable": false,
          "default": "'active'::session_status",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_activity_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "security_flags",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "refresh_count",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ended_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_session_terminated",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "user_sessions_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_user_sessions_device_type",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "device_type",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_expires_at",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "expires_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_last_activity",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "last_activity_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_tenant_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_token",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "session_token",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_user_id",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_user_sessions_voice_active",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "voice_session_active",
          "size": "8192 bytes"
        },
        {
          "name": "user_sessions_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "user_sessions_session_token_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "session_token",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins can view tenant sessions",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(EXISTS ( SELECT 1\n   FROM users_extended ue\n  WHERE ((ue.id = auth.uid()) AND (ue.role = 'admin'::user_role) AND (ue.tenant_id = user_sessions.tenant_id))))",
          "with_check": null
        },
        {
          "name": "System can insert sessions",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "true"
        },
        {
          "name": "Users can update own sessions",
          "command": "UPDATE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = user_id)",
          "with_check": null
        },
        {
          "name": "Users can view own sessions",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(auth.uid() = user_id)",
          "with_check": null
        }
      ]
    },
    {
      "name": "travel_logs",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "from_property_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "to_property_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "departure_time",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "arrival_time",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "distance_km",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 8,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "equipment_cleaned",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "travel_logs_from_property_id_fkey",
          "column": "from_property_id",
          "references_table": "properties",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        },
        {
          "constraint_name": "travel_logs_to_property_id_fkey",
          "column": "to_property_id",
          "references_table": "properties",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "SET NULL"
        }
      ],
      "indexes": [
        {
          "name": "idx_travel_logs_departure",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "departure_time",
          "size": "16 kB"
        },
        {
          "name": "idx_travel_logs_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "idx_travel_logs_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "16 kB"
        },
        {
          "name": "travel_logs_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can create their own travel logs",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "(user_id = auth.uid())"
        },
        {
          "name": "Users can view their own travel logs",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((user_id = auth.uid()) OR (tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid()))))",
          "with_check": null
        }
      ]
    },
    {
      "name": "audit_logs",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "80 kB",
      "total_size": "96 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "entity_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "entity_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "action",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "performed_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "details",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ip_address",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_agent",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "audit_logs_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_audit_logs_created_at",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "created_at",
          "size": "16 kB"
        },
        {
          "name": "idx_audit_logs_entity",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "entity_type, entity_id",
          "size": "16 kB"
        },
        {
          "name": "idx_audit_logs_performed_by",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "performed_by",
          "size": "16 kB"
        },
        {
          "name": "idx_audit_logs_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Admins and managers can view audit logs",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        },
        {
          "name": "System can insert audit logs",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "true"
        }
      ]
    },
    {
      "name": "job_reschedules",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "original_job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "original_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "new_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reason",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "rescheduled_by",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending_confirmation'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_notified",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "confirmed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "job_reschedules_original_job_id_fkey",
          "column": "original_job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_job_reschedules_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "original_job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_job_reschedules_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "status",
          "size": "16 kB"
        },
        {
          "name": "idx_job_reschedules_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "job_reschedules_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Users can create reschedules",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))"
        },
        {
          "name": "Users can view their tenant's reschedules",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id IN ( SELECT users_extended.tenant_id\n   FROM users_extended\n  WHERE (users_extended.id = auth.uid())))",
          "with_check": null
        }
      ]
    },
    {
      "name": "safety_checklist_completions",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "32 kB",
      "total_size": "40 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "checklist_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "items_completed",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "location",
          "type": "jsonb",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "signature",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_safety_completions_checklist",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "checklist_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_safety_completions_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_safety_completions_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "8192 bytes"
        },
        {
          "name": "safety_checklist_completions_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": []
    },
    {
      "name": "conflict_logs",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "40 kB",
      "total_size": "48 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "entity_type",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 100,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "entity_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "conflict_type",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "field_name",
          "type": "character varying",
          "nullable": true,
          "default": null,
          "max_length": 100,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user1_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user1_role",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user1_changes",
          "type": "jsonb",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user1_timestamp",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user2_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user2_role",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user2_changes",
          "type": "jsonb",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user2_timestamp",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resolution_strategy",
          "type": "character varying",
          "nullable": false,
          "default": null,
          "max_length": 50,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "merged_result",
          "type": "jsonb",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "winning_user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "requires_supervisor_review",
          "type": "boolean",
          "nullable": false,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reviewed_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reviewed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "review_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "detected_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "conflict_logs_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_conflict_logs_company",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "company_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_conflict_logs_entity",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "entity_type, entity_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_conflict_logs_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_conflict_logs_review",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "requires_supervisor_review, reviewed_at",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Company members view conflict logs",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((company_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text))",
          "with_check": null
        },
        {
          "name": "Supervisors can review conflicts",
          "command": "UPDATE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(((company_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text)) AND ((((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'role'::text) = ANY (ARRAY['supervisor'::text, 'admin'::text])))",
          "with_check": null
        },
        {
          "name": "System can insert conflict logs",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "((company_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'company_id'::text))"
        }
      ]
    },
    {
      "name": "dev_manifest_history",
      "schema": "public",
      "row_count": -1,
      "table_size": "0 bytes",
      "indexes_size": "24 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "manifest_content",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "file_count",
          "type": "integer",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "generated_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "branch_name",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "commit_hash",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_percentage",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "voice_coverage_percentage",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "dev_manifest_history_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_dev_manifest_history_created_at",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "created_at",
          "size": "8192 bytes"
        },
        {
          "name": "idx_dev_manifest_history_generated_by",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "generated_by",
          "size": "8192 bytes"
        }
      ],
      "rls_policies": [
        {
          "name": "Developers can insert manifest history",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "((auth.uid() IN ( SELECT users.id\n   FROM auth.users\n  WHERE (((users.raw_user_meta_data ->> 'is_developer'::text) = 'true'::text) OR ((users.raw_app_meta_data ->> 'is_developer'::text) = 'true'::text)))) OR ((auth.jwt() ->> 'role'::text) = 'developer'::text))"
        },
        {
          "name": "Developers can view manifest history",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((auth.uid() IN ( SELECT users.id\n   FROM auth.users\n  WHERE (((users.raw_user_meta_data ->> 'is_developer'::text) = 'true'::text) OR ((users.raw_app_meta_data ->> 'is_developer'::text) = 'true'::text)))) OR ((auth.jwt() ->> 'role'::text) = 'developer'::text))",
          "with_check": null
        },
        {
          "name": "Users can delete own manifests",
          "command": "DELETE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(generated_by = auth.uid())",
          "with_check": null
        },
        {
          "name": "Users can update own manifests",
          "command": "UPDATE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(generated_by = auth.uid())",
          "with_check": "(generated_by = auth.uid())"
        }
      ]
    },
    {
      "name": "items",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "168 kB",
      "total_size": "184 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "item_type",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "category",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tracking_mode",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "manufacturer",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "model",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "serial_number",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "sku",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "barcode",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "current_quantity",
          "type": "numeric",
          "nullable": true,
          "default": "0",
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "unit_of_measure",
          "type": "text",
          "nullable": true,
          "default": "'each'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "min_quantity",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "max_quantity",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "reorder_point",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "current_location_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "home_location_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_to_user_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_to_job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'active'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "condition",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_maintenance_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "next_maintenance_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "purchase_date",
          "type": "date",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "purchase_price",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "current_value",
          "type": "numeric",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 10,
          "numeric_scale": 2,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "depreciation_method",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "attributes",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tags",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "custom_fields",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "primary_image_url",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "image_urls",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "idx_items_assigned_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "assigned_to_job_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_items_assigned_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "assigned_to_user_id",
          "size": "8192 bytes"
        },
        {
          "name": "idx_items_location",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "current_location_id",
          "size": "16 kB"
        },
        {
          "name": "idx_items_tenant_category",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, category",
          "size": "16 kB"
        },
        {
          "name": "idx_items_tenant_status",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, status",
          "size": "16 kB"
        },
        {
          "name": "idx_items_tenant_type",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id, item_type",
          "size": "16 kB"
        },
        {
          "name": "items_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "items_tenant_id_barcode_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, barcode",
          "size": "16 kB"
        },
        {
          "name": "items_tenant_id_serial_number_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, serial_number",
          "size": "16 kB"
        },
        {
          "name": "items_tenant_id_sku_key",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "tenant_id, sku",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "items_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((auth.jwt() ->> 'role'::text) = 'service_role'::text)",
          "with_check": null
        },
        {
          "name": "items_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = ((((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "routing_schedules",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "scheduled_date",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_ids",
          "type": "ARRAY",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "total_distance_meters",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "total_duration_minutes",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "route_geometry",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "optimization_status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "mapbox_route_geometry",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "company_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "start_location_lat",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "start_location_lng",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "total_duration_seconds",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "waypoints",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "routing_schedules_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "routing_schedules_user_id_fkey",
          "column": "user_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_routing_schedules_date",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "scheduled_date",
          "size": "16 kB"
        },
        {
          "name": "idx_routing_schedules_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "idx_routing_schedules_user",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "user_id",
          "size": "16 kB"
        },
        {
          "name": "routing_schedules_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "routing_schedules_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "intake_requests",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "64 kB",
      "total_size": "80 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_email",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "customer_phone",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "service_type",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'new'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "priority",
          "type": "text",
          "nullable": false,
          "default": "'medium'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "converted_to_job_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "assigned_to",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "lead_score",
          "type": "integer",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 32,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "converted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "request_source",
          "type": "text",
          "nullable": true,
          "default": "'website'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "source",
          "type": "text",
          "nullable": true,
          "default": "'website'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "intake_requests_assigned_to_fkey",
          "column": "assigned_to",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "intake_requests_converted_to_job_id_fkey",
          "column": "converted_to_job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "intake_requests_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_intake_requests_email",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "customer_email",
          "size": "16 kB"
        },
        {
          "name": "idx_intake_requests_phone",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "customer_phone",
          "size": "16 kB"
        },
        {
          "name": "idx_intake_requests_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "intake_requests_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "intake_requests_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "dev_project_standards",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "document_title",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "document_content",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "version",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "last_updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_by",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "category",
          "type": "text",
          "nullable": true,
          "default": "'general'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tags",
          "type": "ARRAY",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "dev_project_standards_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        },
        {
          "name": "idx_dev_project_standards_category",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "category",
          "size": "16 kB"
        },
        {
          "name": "idx_dev_project_standards_title",
          "type": "btree",
          "is_unique": true,
          "is_primary": false,
          "columns": "document_title",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "Anyone can view project standards",
          "command": "SELECT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(is_active = true)",
          "with_check": null
        },
        {
          "name": "Developers can delete project standards",
          "command": "DELETE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((auth.uid() IN ( SELECT users.id\n   FROM auth.users\n  WHERE (((users.raw_user_meta_data ->> 'is_developer'::text) = 'true'::text) OR ((users.raw_app_meta_data ->> 'is_developer'::text) = 'true'::text)))) OR ((auth.jwt() ->> 'role'::text) = 'developer'::text))",
          "with_check": null
        },
        {
          "name": "Developers can insert project standards",
          "command": "INSERT",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "",
          "with_check": "((auth.uid() IN ( SELECT users.id\n   FROM auth.users\n  WHERE (((users.raw_user_meta_data ->> 'is_developer'::text) = 'true'::text) OR ((users.raw_app_meta_data ->> 'is_developer'::text) = 'true'::text)))) OR ((auth.jwt() ->> 'role'::text) = 'developer'::text))"
        },
        {
          "name": "Developers can update project standards",
          "command": "UPDATE",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((auth.uid() IN ( SELECT users.id\n   FROM auth.users\n  WHERE (((users.raw_user_meta_data ->> 'is_developer'::text) = 'true'::text) OR ((users.raw_app_meta_data ->> 'is_developer'::text) = 'true'::text)))) OR ((auth.jwt() ->> 'role'::text) = 'developer'::text))",
          "with_check": "((auth.uid() IN ( SELECT users.id\n   FROM auth.users\n  WHERE (((users.raw_user_meta_data ->> 'is_developer'::text) = 'true'::text) OR ((users.raw_app_meta_data ->> 'is_developer'::text) = 'true'::text)))) OR ((auth.jwt() ->> 'role'::text) = 'developer'::text))"
        }
      ]
    },
    {
      "name": "safety_checklists",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "job_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "checklist_items",
          "type": "jsonb",
          "nullable": false,
          "default": "'[]'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completion_status",
          "type": "text",
          "nullable": false,
          "default": "'in_progress'::text",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "supervisor_approved",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "supervisor_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "supervisor_notes",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "safety_checklists_job_id_fkey",
          "column": "job_id",
          "references_table": "jobs",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "safety_checklists_supervisor_id_fkey",
          "column": "supervisor_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        },
        {
          "constraint_name": "safety_checklists_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "safety_checklists_user_id_fkey",
          "column": "user_id",
          "references_table": "users_extended",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "NO ACTION"
        }
      ],
      "indexes": [
        {
          "name": "idx_safety_checklists_job",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "job_id",
          "size": "16 kB"
        },
        {
          "name": "idx_safety_checklists_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "safety_checklists_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "safety_checklists_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "intake_documents",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "48 kB",
      "total_size": "64 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "intake_request_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "document_url",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "document_type",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ocr_text",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ocr_confidence",
          "type": "double precision",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 53,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "ocr_metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "intake_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "storage_path",
          "type": "text",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "file_size_bytes",
          "type": "bigint",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": 64,
          "numeric_scale": 0,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "uploaded_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "intake_documents_intake_id_fkey",
          "column": "intake_id",
          "references_table": "intake_requests",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "intake_documents_intake_request_id_fkey",
          "column": "intake_request_id",
          "references_table": "intake_requests",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        },
        {
          "constraint_name": "intake_documents_tenant_id_fkey",
          "column": "tenant_id",
          "references_table": "tenants",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "idx_intake_documents_request",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "intake_request_id",
          "size": "16 kB"
        },
        {
          "name": "idx_intake_documents_tenant",
          "type": "btree",
          "is_unique": false,
          "is_primary": false,
          "columns": "tenant_id",
          "size": "16 kB"
        },
        {
          "name": "intake_documents_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "intake_documents_tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "(tenant_id = (current_setting('app.current_tenant_id'::text, true))::uuid)",
          "with_check": null
        }
      ]
    },
    {
      "name": "vendors",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "intake_session_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [],
      "indexes": [
        {
          "name": "vendors_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        },
        {
          "name": "vendors_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        }
      ]
    },
    {
      "name": "vendor_aliases",
      "schema": "public",
      "row_count": -1,
      "table_size": "8192 bytes",
      "indexes_size": "16 kB",
      "total_size": "32 kB",
      "has_rls": true,
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "vendor_id",
          "type": "uuid",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "alias",
          "type": "text",
          "nullable": false,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        },
        {
          "name": "tenant_id",
          "type": "uuid",
          "nullable": true,
          "default": null,
          "max_length": null,
          "numeric_precision": null,
          "numeric_scale": null,
          "is_identity": false,
          "identity_generation": null
        }
      ],
      "primary_keys": [
        "id"
      ],
      "foreign_keys": [
        {
          "constraint_name": "vendor_aliases_vendor_id_fkey",
          "column": "vendor_id",
          "references_table": "vendors",
          "references_column": "id",
          "on_update": "NO ACTION",
          "on_delete": "CASCADE"
        }
      ],
      "indexes": [
        {
          "name": "vendor_aliases_pkey",
          "type": "btree",
          "is_unique": true,
          "is_primary": true,
          "columns": "id",
          "size": "16 kB"
        }
      ],
      "rls_policies": [
        {
          "name": "tenant_isolation",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [],
          "check_expression": "((tenant_id)::text = (((current_setting('request.jwt.claims'::text, true))::json -> 'app_metadata'::text) ->> 'tenant_id'::text))",
          "with_check": null
        },
        {
          "name": "vendor_aliases_service_role",
          "command": "ALL",
          "permissive": "PERMISSIVE",
          "roles": [
            "service_role"
          ],
          "check_expression": "true",
          "with_check": "true"
        }
      ]
    }
  ],
  "insights": {
    "largest_tables": [
      {
        "name": "spatial_ref_sys",
        "rows": 8500,
        "size": "7144 kB"
      },
      {
        "name": "gps_tracking_records",
        "rows": 1046,
        "size": "488 kB"
      },
      {
        "name": "code_pattern_violations",
        "rows": 277,
        "size": "168 kB"
      },
      {
        "name": "notification_queue",
        "rows": 175,
        "size": "264 kB"
      },
      {
        "name": "auth_audit_log",
        "rows": 138,
        "size": "176 kB"
      },
      {
        "name": "customers",
        "rows": 83,
        "size": "128 kB"
      },
      {
        "name": "tenants",
        "rows": 71,
        "size": "88 kB"
      },
      {
        "name": "invoices",
        "rows": 57,
        "size": "168 kB"
      },
      {
        "name": "jobs",
        "rows": 47,
        "size": "200 kB"
      },
      {
        "name": "equipment_maintenance",
        "rows": 26,
        "size": "80 kB"
      }
    ],
    "tables_without_primary_key": [],
    "tables_without_indexes": [],
    "tables_with_rls_but_no_policies": [
      "tenants",
      "safety_checklist_completions"
    ],
    "orphaned_tables": [],
    "relationship_map": {
      "gps_tracking_records": {
        "references": [
          {
            "table": "jobs",
            "via": "job_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          },
          {
            "table": "users_extended",
            "via": "user_id → id"
          }
        ],
        "referenced_by": []
      },
      "notification_queue": {
        "references": [
          {
            "table": "companies",
            "via": "company_id → id"
          }
        ],
        "referenced_by": []
      },
      "auth_audit_log": {
        "references": [
          {
            "table": "user_sessions",
            "via": "session_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": []
      },
      "customers": {
        "references": [
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "jobs",
            "via": "customer_id ← id"
          },
          {
            "table": "properties",
            "via": "customer_id ← id"
          }
        ]
      },
      "invoices": {
        "references": [
          {
            "table": "jobs",
            "via": "job_id → id"
          }
        ],
        "referenced_by": []
      },
      "jobs": {
        "references": [
          {
            "table": "users_extended",
            "via": "assigned_to → id"
          },
          {
            "table": "customers",
            "via": "customer_id → id"
          },
          {
            "table": "properties",
            "via": "property_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "gps_tracking_records",
            "via": "job_id ← id"
          },
          {
            "table": "invoices",
            "via": "job_id ← id"
          },
          {
            "table": "workflow_tasks",
            "via": "job_id ← id"
          },
          {
            "table": "geofences",
            "via": "job_id ← id"
          },
          {
            "table": "material_requests",
            "via": "job_id ← id"
          },
          {
            "table": "customer_feedback",
            "via": "job_id ← id"
          },
          {
            "table": "job_reschedules",
            "via": "original_job_id ← id"
          },
          {
            "table": "intake_requests",
            "via": "converted_to_job_id ← id"
          },
          {
            "table": "safety_checklists",
            "via": "job_id ← id"
          }
        ]
      },
      "users_extended": {
        "references": [
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "gps_tracking_records",
            "via": "user_id ← id"
          },
          {
            "table": "jobs",
            "via": "assigned_to ← id"
          },
          {
            "table": "workflow_tasks",
            "via": "completed_by ← id"
          },
          {
            "table": "workflow_tasks",
            "via": "supervisor_id ← id"
          },
          {
            "table": "workflow_tasks",
            "via": "user_id ← id"
          },
          {
            "table": "geofence_events",
            "via": "user_id ← id"
          },
          {
            "table": "routing_schedules",
            "via": "user_id ← id"
          },
          {
            "table": "intake_requests",
            "via": "assigned_to ← id"
          },
          {
            "table": "safety_checklists",
            "via": "supervisor_id ← id"
          },
          {
            "table": "safety_checklists",
            "via": "user_id ← id"
          }
        ]
      },
      "kit_items": {
        "references": [
          {
            "table": "companies",
            "via": "tenant_id → id"
          },
          {
            "table": "kits",
            "via": "kit_id → id"
          }
        ],
        "referenced_by": []
      },
      "properties": {
        "references": [
          {
            "table": "customers",
            "via": "customer_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "jobs",
            "via": "property_id ← id"
          },
          {
            "table": "travel_logs",
            "via": "from_property_id ← id"
          },
          {
            "table": "travel_logs",
            "via": "to_property_id ← id"
          }
        ]
      },
      "kits": {
        "references": [
          {
            "table": "companies",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "kit_items",
            "via": "kit_id ← id"
          },
          {
            "table": "kit_variants",
            "via": "kit_id ← id"
          },
          {
            "table": "kit_assignments",
            "via": "kit_id ← id"
          }
        ]
      },
      "kit_variants": {
        "references": [
          {
            "table": "companies",
            "via": "tenant_id → id"
          },
          {
            "table": "kits",
            "via": "kit_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "kit_assignments",
            "via": "variant_id ← id"
          }
        ]
      },
      "day_plans": {
        "references": [
          {
            "table": "companies",
            "via": "company_id → id"
          }
        ],
        "referenced_by": []
      },
      "kit_assignments": {
        "references": [
          {
            "table": "kits",
            "via": "kit_id → id"
          },
          {
            "table": "kit_variants",
            "via": "variant_id → id"
          }
        ],
        "referenced_by": []
      },
      "workflow_tasks": {
        "references": [
          {
            "table": "users_extended",
            "via": "completed_by → id"
          },
          {
            "table": "jobs",
            "via": "job_id → id"
          },
          {
            "table": "users_extended",
            "via": "supervisor_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          },
          {
            "table": "users_extended",
            "via": "user_id → id"
          }
        ],
        "referenced_by": []
      },
      "geofences": {
        "references": [
          {
            "table": "jobs",
            "via": "job_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "geofence_events",
            "via": "geofence_id ← id"
          }
        ]
      },
      "geofence_events": {
        "references": [
          {
            "table": "geofences",
            "via": "geofence_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          },
          {
            "table": "users_extended",
            "via": "user_id → id"
          }
        ],
        "referenced_by": []
      },
      "ocr_jobs": {
        "references": [
          {
            "table": "vendors",
            "via": "vendor_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "ocr_documents",
            "via": "ocr_job_id ← id"
          }
        ]
      },
      "ocr_documents": {
        "references": [
          {
            "table": "ocr_jobs",
            "via": "ocr_job_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "ocr_line_items",
            "via": "ocr_document_id ← id"
          },
          {
            "table": "ocr_note_entities",
            "via": "ocr_document_id ← id"
          }
        ]
      },
      "ocr_line_items": {
        "references": [
          {
            "table": "ocr_documents",
            "via": "ocr_document_id → id"
          }
        ],
        "referenced_by": []
      },
      "ocr_note_entities": {
        "references": [
          {
            "table": "ocr_documents",
            "via": "ocr_document_id → id"
          }
        ],
        "referenced_by": []
      },
      "vendor_locations": {
        "references": [
          {
            "table": "vendors",
            "via": "vendor_id → id"
          }
        ],
        "referenced_by": []
      },
      "item_transactions": {
        "references": [
          {
            "table": "items",
            "via": "item_id → id"
          }
        ],
        "referenced_by": []
      },
      "user_invitations": {
        "references": [
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": []
      },
      "tenant_assignments": {
        "references": [
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": []
      },
      "role_permissions": {
        "references": [
          {
            "table": "permissions",
            "via": "permission_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": []
      },
      "material_requests": {
        "references": [
          {
            "table": "jobs",
            "via": "job_id → id"
          }
        ],
        "referenced_by": []
      },
      "customer_feedback": {
        "references": [
          {
            "table": "jobs",
            "via": "job_id → id"
          }
        ],
        "referenced_by": []
      },
      "user_sessions": {
        "references": [
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "auth_audit_log",
            "via": "session_id ← id"
          }
        ]
      },
      "travel_logs": {
        "references": [
          {
            "table": "properties",
            "via": "from_property_id → id"
          },
          {
            "table": "properties",
            "via": "to_property_id → id"
          }
        ],
        "referenced_by": []
      },
      "job_reschedules": {
        "references": [
          {
            "table": "jobs",
            "via": "original_job_id → id"
          }
        ],
        "referenced_by": []
      },
      "routing_schedules": {
        "references": [
          {
            "table": "tenants",
            "via": "tenant_id → id"
          },
          {
            "table": "users_extended",
            "via": "user_id → id"
          }
        ],
        "referenced_by": []
      },
      "intake_requests": {
        "references": [
          {
            "table": "users_extended",
            "via": "assigned_to → id"
          },
          {
            "table": "jobs",
            "via": "converted_to_job_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": [
          {
            "table": "intake_documents",
            "via": "intake_id ← id"
          },
          {
            "table": "intake_documents",
            "via": "intake_request_id ← id"
          }
        ]
      },
      "safety_checklists": {
        "references": [
          {
            "table": "jobs",
            "via": "job_id → id"
          },
          {
            "table": "users_extended",
            "via": "supervisor_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          },
          {
            "table": "users_extended",
            "via": "user_id → id"
          }
        ],
        "referenced_by": []
      },
      "intake_documents": {
        "references": [
          {
            "table": "intake_requests",
            "via": "intake_id → id"
          },
          {
            "table": "intake_requests",
            "via": "intake_request_id → id"
          },
          {
            "table": "tenants",
            "via": "tenant_id → id"
          }
        ],
        "referenced_by": []
      },
      "vendor_aliases": {
        "references": [
          {
            "table": "vendors",
            "via": "vendor_id → id"
          }
        ],
        "referenced_by": []
      }
    }
  },
  "recommendations": [
    "🔒 Add RLS policies to 2 tables with RLS enabled but no policies",
    "🛡️ Enable RLS on 5 tables containing data",
    "📈 Add indexes to 1 large tables with 1000+ rows"
  ]
}